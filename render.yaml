services:
  # Spring Boot Backend API (H2 Database)
  - type: web
    name: notes-backend
    env: docker
    plan: free
    dockerfilePath: ./Dockerfile
    dockerContext: .
    envVars:
      - key: SPRING_PROFILES_ACTIVE
        value: prod
      - key: ALLOWED_ORIGINS
        value: https://frontend-vercel-5dzibw1q3-franksvilcas-projects.vercel.app,https://frontend-vercel-lemon-rho.vercel.app,http://localhost:3000
      - key: H2_CONSOLE_ENABLED
        value: false
      - key: JPA_SHOW_SQL
        value: false
      - key: LOG_LEVEL_APP
        value: INFO
      - key: LOG_LEVEL_WEB
        value: WARN
    # Persistent disk for H2 database
    disk:
      name: notes-data
      mountPath: /app/data
      sizeGB: 1

